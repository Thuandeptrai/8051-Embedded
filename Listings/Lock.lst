C51 COMPILER V9.60.0.0   LOCK                                                              04/19/2022 00:48:13 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LOCK
OBJECT MODULE PLACED IN .\Objects\Lock.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Lock.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\Lock
                    -.lst) TABS(2) OBJECT(.\Objects\Lock.obj)

line level    source

   1          #include<reg51.h>
   2          
   3          #include<string.h>
   4          
   5          sbit RS = P3 ^ 0;
   6          sbit EN = P3 ^ 1;
   7          sbit IN1 = P3 ^ 2;
   8          sbit IN2 = P3 ^ 3;
   9          sbit RW = P0 ^ 0;
  10          void delay(int a) {
  11   1        int i, j;
  12   1        for (i = 0; i < a; i++)
  13   1          for (j = 0; j < 255; j++);
  14   1      }
  15          void cmd(char cm) {
  16   1        P2 = cm;
  17   1        RS = 0;
  18   1        EN = 1;
  19   1        delay(1);
  20   1        EN = 0;
  21   1      }
  22          void cmdwrt(unsigned char x) {
  23   1        P2 = x; //send the command to Port 0 on which 16*2 lcd is connected
  24   1        RS = 0; //make RS = 0 for command
  25   1        RW = 0; //make RW = 0 for write operation
  26   1        EN = 1; //send a HIGH to LOW pulse on Enable(E) pin to start commandwrite operation 
  27   1        delay(1);
  28   1        EN = 0;
  29   1      }
  30          void dat(char dt) {
  31   1        P2 = dt;
  32   1        RS = 1;
  33   1        EN = 1;
  34   1        delay(1);
  35   1        EN = 0;
  36   1      }
  37          
  38          void datawrt(unsigned char y) {
  39   1        P2 = y; //send the data to Port 0 on which 16*2 lcd is connected
  40   1        RS = 1; //make RS = 1 for command
  41   1        RW = 0; //make RW = 0 for write operation
  42   1        EN = 1; //send a HIGH to LOW pulse on Enable(E) pin to start datawrite operation
  43   1        delay(1);
  44   1        EN = 0;
  45   1      }
  46          void display(char * lcd) {
  47   1        while ( * lcd != '\0') {
  48   2          dat( * lcd);
  49   2          lcd++;
  50   2        }
  51   1      }
  52          void lcdint() {
  53   1        cmd(0x01);
  54   1        cmd(0x38);
C51 COMPILER V9.60.0.0   LOCK                                                              04/19/2022 00:48:13 PAGE 2   

  55   1        cmd(0x0E);
  56   1        cmd(0x80);
  57   1      
  58   1      }
  59          char pass[5] = "1234";
  60          int i = 0;
  61          int changepassword(int i) {
  62   1      
  63   1        char * ptr;
  64   1        IN1 = 0;
  65   1        IN2 = 0;
  66   1        ptr = pass;
  67   1        lcdint();
  68   1        display("N-Password-");
  69   1        
  70   1        pass[4] = '\0';
  71   1      
  72   1        while (1) {
  73   2          while (i < 4) {
  74   3            P1 = 0xFE;
  75   3            if (P1 == 0xEE) {
  76   4              *(ptr + i) = '7';
  77   4              dat('7');
  78   4              delay(200);
  79   4              cmd(0x06);
  80   4      
  81   4              i++;
  82   4      
  83   4            } else if (P1 == 0xDE) {
  84   4              *(ptr + i) = '8';
  85   4              dat('8');
  86   4              delay(200);
  87   4              cmd(0x06);
  88   4      
  89   4              i++;
  90   4      
  91   4            } else if (P1 == 0xBE) {
  92   4              *(ptr + i) = '9';
  93   4              dat('9');
  94   4              delay(200);
  95   4              cmd(0x06);
  96   4      
  97   4              i++;
  98   4            } else if (P1 == 0x7E) {
  99   4              *(ptr + i) = '/';
 100   4              dat('/');
 101   4              delay(200);
 102   4              cmd(0x06);
 103   4      
 104   4              i++;
 105   4            }
 106   3      
 107   3            P1 = 0xFD;
 108   3            if (P1 == 0xED) {
 109   4              *(ptr + i) = '4';
 110   4              dat('4');
 111   4              delay(200);
 112   4              cmd(0x06);
 113   4      
 114   4              i++;
 115   4            } else if (P1 == 0xDD) {
 116   4              *(ptr + i) = '5';
C51 COMPILER V9.60.0.0   LOCK                                                              04/19/2022 00:48:13 PAGE 3   

 117   4              dat('5');
 118   4              delay(200);
 119   4              cmd(0x06);
 120   4      
 121   4              i++;
 122   4            } else if (P1 == 0xBD) {
 123   4              *(ptr + i) = '6';
 124   4              dat('6');
 125   4              delay(200);
 126   4              cmd(0x06);
 127   4      
 128   4              i++;
 129   4            } else if (P1 == 0x7D) {
 130   4              *(ptr + i) = '*';
 131   4              dat('*');
 132   4              delay(200);
 133   4              cmd(0x06);
 134   4      
 135   4              i++;
 136   4            }
 137   3      
 138   3            P1 = 0xFB;
 139   3            if (P1 == 0xEB) {
 140   4              *(ptr + i) = '1';
 141   4              dat('1');
 142   4              delay(200);
 143   4              cmd(0x06);
 144   4      
 145   4              i++;
 146   4            } else if (P1 == 0xDB) {
 147   4              *(ptr + i) = '2';
 148   4              dat('2');
 149   4              delay(200);
 150   4              cmd(0x06);
 151   4      
 152   4              i++;
 153   4            } else if (P1 == 0xBB) {
 154   4              *(ptr + i) = '3';
 155   4              dat('3');
 156   4              delay(200);
 157   4              cmd(0x06);
 158   4      
 159   4              i++;
 160   4            } else if (P1 == 0x7B) {
 161   4              *(ptr + i) = '-';
 162   4              dat('-');
 163   4              delay(200);
 164   4              cmd(0x06);
 165   4      
 166   4              i++;
 167   4            }
 168   3      
 169   3            P1 = 0xF7;
 170   3            if (P1 == 0xE7) {
 171   4              *(ptr + i) = 'C';
 172   4              dat('C');
 173   4              delay(200);
 174   4              cmd(0x06);
 175   4      
 176   4              i++;
 177   4      
 178   4            } else if (P1 == 0xD7) {
C51 COMPILER V9.60.0.0   LOCK                                                              04/19/2022 00:48:13 PAGE 4   

 179   4              *(ptr + i) = '0';
 180   4              dat('0');
 181   4              delay(200);
 182   4              cmd(0x06);
 183   4      
 184   4              i++;
 185   4            } else if (P1 == 0xB7) {
 186   4              *(ptr + i) = '=';
 187   4              dat('=');
 188   4              delay(200);
 189   4              cmd(0x06);
 190   4      
 191   4              i++;
 192   4            } else if (P1 == 0x77) {
 193   4              *(ptr + i) = '+';
 194   4              dat('+');
 195   4              delay(200);
 196   4              cmd(0x06);
 197   4      
 198   4              i++;
 199   4            }
 200   3          }
 201   2          while (i == 4) {
 202   3      
 203   3            delay(100);
 204   3            cmd(0x01);
 205   3            IN1 = 0;
 206   3            IN2 = 0;
 207   3            return 0;
 208   3      
 209   3          }
 210   2      
 211   2        }
 212   1      }
 213          void main() {
 214   1      
 215   1        char pass2[5];
 216   1        int i = 0;
 217   1        char * ptr;
 218   1        ptr = pass2;
 219   1        lcdint();
 220   1        display("Password-");
 221   1      
 222   1        pass2[4] = '\0';
 223   1      
 224   1        while (1) {
 225   2          while (i < 4) {
 226   3            P1 = 0xFE;
 227   3            if (P1 == 0xEE) {
 228   4              *(ptr + i) = '7';
 229   4              dat('7');
 230   4              delay(200);
 231   4              cmd(0x06);
 232   4      
 233   4              i++;
 234   4      
 235   4            } else if (P1 == 0xDE) {
 236   4              *(ptr + i) = '8';
 237   4              dat('8');
 238   4              delay(200);
 239   4              cmd(0x06);
 240   4      
C51 COMPILER V9.60.0.0   LOCK                                                              04/19/2022 00:48:13 PAGE 5   

 241   4              i++;
 242   4      
 243   4            } else if (P1 == 0xBE) {
 244   4              *(ptr + i) = '9';
 245   4              dat('9');
 246   4              delay(200);
 247   4              cmd(0x06);
 248   4      
 249   4              i++;
 250   4            } else if (P1 == 0x7E) {
 251   4              *(ptr + i) = '/';
 252   4              dat('/');
 253   4              delay(200);
 254   4              cmd(0x06);
 255   4      
 256   4              i++;
 257   4            }
 258   3      
 259   3            P1 = 0xFD;
 260   3            if (P1 == 0xED) {
 261   4              *(ptr + i) = '4';
 262   4              dat('4');
 263   4              delay(200);
 264   4              cmd(0x06);
 265   4      
 266   4              i++;
 267   4            } else if (P1 == 0xDD) {
 268   4              *(ptr + i) = '5';
 269   4              dat('5');
 270   4              delay(200);
 271   4              cmd(0x06);
 272   4      
 273   4              i++;
 274   4            } else if (P1 == 0xBD) {
 275   4              *(ptr + i) = '6';
 276   4              dat('6');
 277   4              delay(200);
 278   4              cmd(0x06);
 279   4      
 280   4              i++;
 281   4            } else if (P1 == 0x7D) {
 282   4              *(ptr + i) = '*';
 283   4              dat('*');
 284   4              delay(200);
 285   4              cmd(0x06);
 286   4      
 287   4              i++;
 288   4            }
 289   3      
 290   3            P1 = 0xFB;
 291   3            if (P1 == 0xEB) {
 292   4              *(ptr + i) = '1';
 293   4              dat('1');
 294   4              delay(200);
 295   4              cmd(0x06);
 296   4      
 297   4              i++;
 298   4            } else if (P1 == 0xDB) {
 299   4              *(ptr + i) = '2';
 300   4              dat('2');
 301   4              delay(200);
 302   4              cmd(0x06);
C51 COMPILER V9.60.0.0   LOCK                                                              04/19/2022 00:48:13 PAGE 6   

 303   4      
 304   4              i++;
 305   4            } else if (P1 == 0xBB) {
 306   4              *(ptr + i) = '3';
 307   4              dat('3');
 308   4              delay(200);
 309   4              cmd(0x06);
 310   4      
 311   4              i++;
 312   4            } else if (P1 == 0x7B) {
 313   4              *(ptr + i) = '-';
 314   4              dat('-');
 315   4              delay(200);
 316   4              cmd(0x06);
 317   4      
 318   4              i++;
 319   4            }
 320   3      
 321   3            P1 = 0xF7;
 322   3            if (P1 == 0xE7) {
 323   4              *(ptr + i) = 'C';
 324   4              dat('C');
 325   4              delay(200);
 326   4              cmd(0x06);
 327   4      
 328   4              i++;
 329   4      
 330   4            } else if (P1 == 0xD7) {
 331   4              *(ptr + i) = '0';
 332   4              dat('0');
 333   4              delay(200);
 334   4              cmd(0x06);
 335   4      
 336   4              i++;
 337   4            } else if (P1 == 0xB7) {
 338   4              *(ptr + i) = '=';
 339   4              dat('=');
 340   4              delay(200);
 341   4              cmd(0x06);
 342   4      
 343   4              i++;
 344   4            } else if (P1 == 0x77) {
 345   4              *(ptr + i) = '+';
 346   4              dat('+');
 347   4              delay(200);
 348   4              cmd(0x06);
 349   4      
 350   4              i++;
 351   4            }
 352   3          }
 353   2      
 354   2          while (i == 4) {
 355   3      
 356   3            if ((strcmp(pass, pass2)) == 0) {
 357   4      
 358   4              delay(200);
 359   4              cmd(0x01);
 360   4              display("Correct Press 1 to ");
 361   4                cmd(0xc1);
 362   4        display("reset password");
 363   4      
 364   4              cmd(0xC0);
C51 COMPILER V9.60.0.0   LOCK                                                              04/19/2022 00:48:13 PAGE 7   

 365   4              IN1 = 1;
 366   4              IN2 = 0;
 367   4      
 368   4              P1 = 0xFB;
 369   4              if (P1 == 0xEB) {
 370   5                delay(200);
 371   5                cmd(0x01);
 372   5                display("N-Password--");
 373   5                delay(200);
 374   5                i = 0;
 375   5                cmd(0x13);
 376   5                changepassword(0);
 377   5                display("Password-");
 378   5      
 379   5              }
 380   4      
 381   4            } else {
 382   4              cmd(0xC0);
 383   4              display("Incorrect");
 384   4              delay(100);
 385   4              cmd(0x01);
 386   4              display("Password-");
 387   4              i = 0;
 388   4              IN1 = 0;
 389   4              IN2 = 0;
 390   4      
 391   4              delay(100);
 392   4            }
 393   3          }
 394   2        }
 395   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1727    ----
   CONSTANT SIZE    =     80    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7      18
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
