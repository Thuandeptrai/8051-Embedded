C51 COMPILER V9.60.0.0   LOCK                                                              04/04/2022 20:33:36 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LOCK
OBJECT MODULE PLACED IN .\Objects\Lock.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Lock.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\Lock
                    -.lst) TABS(2) OBJECT(.\Objects\Lock.obj)

line level    source

   1          #include<reg51.h>
   2          #include<string.h>
   3          sbit RS = P3^0;
   4          sbit EN = P3^1;
   5          sbit IN1 =P3^2;
   6          sbit IN2 = P3^3;
   7          void delay(int a)
   8          {
   9   1        int i,j;
  10   1        for(i=0;i<a;i++)
  11   1        for(j=0;j<255;j++);
  12   1      }
  13          void cmd(char cm)
  14          {
  15   1        P2 = cm;
  16   1        RS = 0;
  17   1        EN = 1;
  18   1        delay(1);
  19   1        EN = 0;
  20   1      }
  21          void dat(char dt)
  22          {
  23   1        P2 = dt;
  24   1        RS = 1;
  25   1        EN = 1;
  26   1        delay(1);
  27   1        EN = 0;
  28   1      }
  29          
  30          void display(char *lcd)
  31          {
  32   1        while(*lcd != '\0')
  33   1        {
  34   2          dat(*lcd);
  35   2          lcd++;
  36   2        }
  37   1      }
  38          void lcdint()
  39          {
  40   1        cmd(0x01);
  41   1        cmd(0x38);
  42   1        cmd(0x0E);
  43   1        cmd(0x80);
  44   1        
  45   1      }
  46          char pass[5] = "1234";
  47            int i=0;
  48          int changepassword(int i)
  49          {
  50   1          
  51   1      
  52   1        char *ptr;
  53   1        ptr = pass;
  54   1        lcdint();
C51 COMPILER V9.60.0.0   LOCK                                                              04/04/2022 20:33:36 PAGE 2   

  55   1        display("N-Password-");
  56   1        pass[4]='\0';
  57   1          
  58   1          while(1)
  59   1          {
  60   2          while(i<4)
  61   2        {
  62   3          P1=0xFE;
  63   3          if(P1==0xEE)
  64   3          {
  65   4            *(ptr+i)='7';
  66   4            dat('7');
  67   4            delay(200);
  68   4            cmd(0x06);
  69   4            
  70   4            i++;
  71   4            
  72   4          }
  73   3          else if(P1==0xDE)
  74   3          {
  75   4            *(ptr+i)='8';
  76   4            dat('8');
  77   4            delay(200);
  78   4            cmd(0x06);
  79   4            
  80   4            i++;
  81   4            
  82   4          }
  83   3          else if(P1==0xBE)
  84   3          {
  85   4            *(ptr+i)='9';
  86   4            dat('9');
  87   4            delay(200);
  88   4            cmd(0x06);
  89   4            
  90   4            i++;
  91   4          }
  92   3          else if(P1==0x7E)
  93   3          {
  94   4            *(ptr+i)='/';
  95   4            dat('/');
  96   4            delay(200);
  97   4            cmd(0x06);
  98   4            
  99   4            i++;
 100   4          }
 101   3          
 102   3        
 103   3          P1=0xFD;
 104   3          if(P1==0xED)
 105   3          {
 106   4            *(ptr+i)='4';
 107   4            dat('4');
 108   4            delay(200);
 109   4            cmd(0x06);
 110   4            
 111   4            i++;
 112   4          }
 113   3          else if(P1==0xDD)
 114   3          {
 115   4            *(ptr+i)='5';
 116   4            dat('5');
C51 COMPILER V9.60.0.0   LOCK                                                              04/04/2022 20:33:36 PAGE 3   

 117   4            delay(200);
 118   4            cmd(0x06);
 119   4            
 120   4            i++;
 121   4          }
 122   3          else if(P1==0xBD)
 123   3          {
 124   4            *(ptr+i)='6';
 125   4            dat('6');
 126   4            delay(200);
 127   4            cmd(0x06);
 128   4            
 129   4            i++;
 130   4          }
 131   3          else if (P1==0x7D)
 132   3          {
 133   4            *(ptr+i)='*';
 134   4            dat('*');
 135   4            delay(200);
 136   4            cmd(0x06);
 137   4            
 138   4            i++;
 139   4          }
 140   3        
 141   3        
 142   3          P1=0xFB;
 143   3          if(P1==0xEB)
 144   3          {
 145   4            *(ptr+i)='1';
 146   4            dat('1');
 147   4            delay(200);
 148   4            cmd(0x06);
 149   4            
 150   4            i++;
 151   4          }
 152   3          else if(P1==0xDB)
 153   3          {
 154   4            *(ptr+i)='2';
 155   4            dat('2');
 156   4            delay(200);
 157   4            cmd(0x06);
 158   4            
 159   4            i++;
 160   4          }
 161   3          else if(P1==0xBB)
 162   3          {
 163   4            *(ptr+i)='3';
 164   4            dat('3');
 165   4            delay(200);
 166   4            cmd(0x06);
 167   4            
 168   4            i++;
 169   4          }
 170   3          else if(P1==0x7B)
 171   3          {
 172   4            *(ptr+i)='-';
 173   4            dat('-');
 174   4            delay(200);
 175   4            cmd(0x06);
 176   4            
 177   4            i++;
 178   4          }
C51 COMPILER V9.60.0.0   LOCK                                                              04/04/2022 20:33:36 PAGE 4   

 179   3        
 180   3        
 181   3        
 182   3          P1=0xF7;
 183   3          if(P1==0xE7)
 184   3          {
 185   4            *(ptr+i)='C';
 186   4            dat('C');
 187   4            delay(200);
 188   4            cmd(0x06);
 189   4            
 190   4            i++;
 191   4            
 192   4          }
 193   3          else if(P1==0xD7)
 194   3          {
 195   4            *(ptr+i)='0';
 196   4            dat('0');
 197   4            delay(200);
 198   4            cmd(0x06);
 199   4            
 200   4            i++;
 201   4          }
 202   3          else if(P1==0xB7)
 203   3          {
 204   4            *(ptr+i)='=';
 205   4            dat('=');
 206   4            delay(200);
 207   4            cmd(0x06);
 208   4            
 209   4            i++;
 210   4          }
 211   3          else if(P1==0x77)
 212   3          {
 213   4            *(ptr+i)='+';
 214   4            dat('+');
 215   4            delay(200);
 216   4            cmd(0x06);
 217   4            
 218   4            i++;
 219   4          }
 220   3        }
 221   2        while(i==4)
 222   2        {
 223   3          
 224   3        
 225   3            delay(100);
 226   3        cmd(0x01);
 227   3        IN1 = 0;
 228   3        IN2 = 0;
 229   3        return 0;
 230   3          
 231   3        }
 232   2        
 233   2        
 234   2      }
 235   1          }
 236          void main()
 237          {
 238   1        
 239   1        char pass2[5];
 240   1        int i=0;
C51 COMPILER V9.60.0.0   LOCK                                                              04/04/2022 20:33:36 PAGE 5   

 241   1        char *ptr;
 242   1        ptr = pass2;
 243   1        lcdint();
 244   1        display("Password-");
 245   1        pass2[4]='\0';
 246   1          
 247   1          while(1)
 248   1          {
 249   2          while(i<4)
 250   2        {
 251   3          P1=0xFE;
 252   3          if(P1==0xEE)
 253   3          {
 254   4            *(ptr+i)='7';
 255   4            dat('7');
 256   4            delay(200);
 257   4            cmd(0x06);
 258   4            
 259   4            i++;
 260   4            
 261   4          }
 262   3          else if(P1==0xDE)
 263   3          {
 264   4            *(ptr+i)='8';
 265   4            dat('8');
 266   4            delay(200);
 267   4            cmd(0x06);
 268   4            
 269   4            i++;
 270   4            
 271   4          }
 272   3          else if(P1==0xBE)
 273   3          {
 274   4            *(ptr+i)='9';
 275   4            dat('9');
 276   4            delay(200);
 277   4            cmd(0x06);
 278   4            
 279   4            i++;
 280   4          }
 281   3          else if(P1==0x7E)
 282   3          {
 283   4            *(ptr+i)='/';
 284   4            dat('/');
 285   4            delay(200);
 286   4            cmd(0x06);
 287   4            
 288   4            i++;
 289   4          }
 290   3          
 291   3        
 292   3          P1=0xFD;
 293   3          if(P1==0xED)
 294   3          {
 295   4            *(ptr+i)='4';
 296   4            dat('4');
 297   4            delay(200);
 298   4            cmd(0x06);
 299   4            
 300   4            i++;
 301   4          }
 302   3          else if(P1==0xDD)
C51 COMPILER V9.60.0.0   LOCK                                                              04/04/2022 20:33:36 PAGE 6   

 303   3          {
 304   4            *(ptr+i)='5';
 305   4            dat('5');
 306   4            delay(200);
 307   4            cmd(0x06);
 308   4            
 309   4            i++;
 310   4          }
 311   3          else if(P1==0xBD)
 312   3          {
 313   4            *(ptr+i)='6';
 314   4            dat('6');
 315   4            delay(200);
 316   4            cmd(0x06);
 317   4            
 318   4            i++;
 319   4          }
 320   3          else if (P1==0x7D)
 321   3          {
 322   4            *(ptr+i)='*';
 323   4            dat('*');
 324   4            delay(200);
 325   4            cmd(0x06);
 326   4            
 327   4            i++;
 328   4          }
 329   3        
 330   3        
 331   3          P1=0xFB;
 332   3          if(P1==0xEB)
 333   3          {
 334   4            *(ptr+i)='1';
 335   4            dat('1');
 336   4            delay(200);
 337   4            cmd(0x06);
 338   4            
 339   4            i++;
 340   4          }
 341   3          else if(P1==0xDB)
 342   3          {
 343   4            *(ptr+i)='2';
 344   4            dat('2');
 345   4            delay(200);
 346   4            cmd(0x06);
 347   4            
 348   4            i++;
 349   4          }
 350   3          else if(P1==0xBB)
 351   3          {
 352   4            *(ptr+i)='3';
 353   4            dat('3');
 354   4            delay(200);
 355   4            cmd(0x06);
 356   4            
 357   4            i++;
 358   4          }
 359   3          else if(P1==0x7B)
 360   3          {
 361   4            *(ptr+i)='-';
 362   4            dat('-');
 363   4            delay(200);
 364   4            cmd(0x06);
C51 COMPILER V9.60.0.0   LOCK                                                              04/04/2022 20:33:36 PAGE 7   

 365   4            
 366   4            i++;
 367   4          }
 368   3        
 369   3        
 370   3        
 371   3          P1=0xF7;
 372   3          if(P1==0xE7)
 373   3          {
 374   4            *(ptr+i)='C';
 375   4            dat('C');
 376   4            delay(200);
 377   4            cmd(0x06);
 378   4            
 379   4            i++;
 380   4            
 381   4          }
 382   3          else if(P1==0xD7)
 383   3          {
 384   4            *(ptr+i)='0';
 385   4            dat('0');
 386   4            delay(200);
 387   4            cmd(0x06);
 388   4            
 389   4            i++;
 390   4          }
 391   3          else if(P1==0xB7)
 392   3          {
 393   4            *(ptr+i)='=';
 394   4            dat('=');
 395   4            delay(200);
 396   4            cmd(0x06);
 397   4            
 398   4            i++;
 399   4          }
 400   3          else if(P1==0x77)
 401   3          {
 402   4            *(ptr+i)='+';
 403   4            dat('+');
 404   4            delay(200);
 405   4            cmd(0x06);
 406   4            
 407   4            i++;
 408   4          }
 409   3        }
 410   2      
 411   2      while(i==4)
 412   2      {
 413   3      
 414   3      if ((strcmp(pass, pass2)) == 0)
 415   3      {
 416   4      
 417   4        delay(100);
 418   4        cmd(0x01);
 419   4        display("Correct \n");
 420   4        delay(300);
 421   4        cmd(0x80);
 422   4        display("Press 1 to reset password");
 423   4          
 424   4          cmd(0xC0);
 425   4          IN1 = 1;
 426   4        IN2 = 0;
C51 COMPILER V9.60.0.0   LOCK                                                              04/04/2022 20:33:36 PAGE 8   

 427   4      
 428   4        P1=0xFB;
 429   4          if(P1==0xEB)
 430   4          { delay(200);
 431   5              cmd(0x01);
 432   5            display("N-Password--");
 433   5            delay(200);
 434   5              i=0;
 435   5        cmd(0x13);
 436   5            changepassword(0);
 437   5            display("Password-");
 438   5          
 439   5          }
 440   4      
 441   4            
 442   4      
 443   4          
 444   4      }
 445   3      
 446   3      else
 447   3      {
 448   4        cmd(0xC0);
 449   4        display("Incorrect");
 450   4        delay(100);
 451   4        cmd(0x01);
 452   4        display("Password-");
 453   4        i = 0;
 454   4        IN1 = 0;
 455   4        IN2 = 0;
 456   4        
 457   4        delay(100);
 458   4      }
 459   3      }
 460   2      }
 461   1        }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1708    ----
   CONSTANT SIZE    =     81    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7      18
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
