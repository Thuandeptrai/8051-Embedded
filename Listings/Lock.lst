C51 COMPILER V9.60.0.0   LOCK                                                              04/11/2022 21:24:05 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LOCK
OBJECT MODULE PLACED IN .\Objects\Lock.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Lock.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\Lock
                    -.lst) TABS(2) OBJECT(.\Objects\Lock.obj)

line level    source

   1          #include<reg51.h>
   2          #include<string.h>
   3          sbit RS = P3^0;
   4          sbit EN = P3^1;
   5          sbit IN1 =P3^2;
   6          sbit IN2 = P3^3;
   7          void delay(int a)
   8          {
   9   1        int i,j;
  10   1        for(i=0;i<a;i++)
  11   1        for(j=0;j<255;j++);
  12   1      }
  13          void cmd(char cm)
  14          {
  15   1        P2 = cm;
  16   1        RS = 0;
  17   1        EN = 1;
  18   1        delay(1);
  19   1        EN = 0;
  20   1      }
  21          void dat(char dt)
  22          {
  23   1        P2 = dt;
  24   1        RS = 1;
  25   1        EN = 1;
  26   1        delay(1);
  27   1        EN = 0;
  28   1      }
  29          
  30          void display(char *lcd)
  31          {
  32   1        while(*lcd != '\0')
  33   1        {
  34   2          dat(*lcd);
  35   2          lcd++;
  36   2        }
  37   1      }
  38          void lcdint()
  39          {
  40   1        cmd(0x01);
  41   1        cmd(0x38);
  42   1        cmd(0x0E);
  43   1        cmd(0x80);
  44   1        
  45   1      }
  46          char pass[5] = "1234";
  47            int i=0;
  48          int changepassword(int i)
  49          {
  50   1          
  51   1        
  52   1        char *ptr;
  53   1        IN1 = 0;
  54   1        IN2 = 0;
C51 COMPILER V9.60.0.0   LOCK                                                              04/11/2022 21:24:05 PAGE 2   

  55   1        ptr = pass;
  56   1        lcdint();
  57   1        display("N-Password-");
  58   1        pass[4]='\0';
  59   1          
  60   1          while(1)
  61   1          {
  62   2          while(i<4)
  63   2        {
  64   3          P1=0xFE;
  65   3          if(P1==0xEE)
  66   3          {
  67   4            *(ptr+i)='7';
  68   4            dat('7');
  69   4            delay(200);
  70   4            cmd(0x06);
  71   4            
  72   4            i++;
  73   4            
  74   4          }
  75   3          else if(P1==0xDE)
  76   3          {
  77   4            *(ptr+i)='8';
  78   4            dat('8');
  79   4            delay(200);
  80   4            cmd(0x06);
  81   4            
  82   4            i++;
  83   4            
  84   4          }
  85   3          else if(P1==0xBE)
  86   3          {
  87   4            *(ptr+i)='9';
  88   4            dat('9');
  89   4            delay(200);
  90   4            cmd(0x06);
  91   4            
  92   4            i++;
  93   4          }
  94   3          else if(P1==0x7E)
  95   3          {
  96   4            *(ptr+i)='/';
  97   4            dat('/');
  98   4            delay(200);
  99   4            cmd(0x06);
 100   4            
 101   4            i++;
 102   4          }
 103   3          
 104   3        
 105   3          P1=0xFD;
 106   3          if(P1==0xED)
 107   3          {
 108   4            *(ptr+i)='4';
 109   4            dat('4');
 110   4            delay(200);
 111   4            cmd(0x06);
 112   4            
 113   4            i++;
 114   4          }
 115   3          else if(P1==0xDD)
 116   3          {
C51 COMPILER V9.60.0.0   LOCK                                                              04/11/2022 21:24:05 PAGE 3   

 117   4            *(ptr+i)='5';
 118   4            dat('5');
 119   4            delay(200);
 120   4            cmd(0x06);
 121   4            
 122   4            i++;
 123   4          }
 124   3          else if(P1==0xBD)
 125   3          {
 126   4            *(ptr+i)='6';
 127   4            dat('6');
 128   4            delay(200);
 129   4            cmd(0x06);
 130   4            
 131   4            i++;
 132   4          }
 133   3          else if (P1==0x7D)
 134   3          {
 135   4            *(ptr+i)='*';
 136   4            dat('*');
 137   4            delay(200);
 138   4            cmd(0x06);
 139   4            
 140   4            i++;
 141   4          }
 142   3        
 143   3        
 144   3          P1=0xFB;
 145   3          if(P1==0xEB)
 146   3          {
 147   4            *(ptr+i)='1';
 148   4            dat('1');
 149   4            delay(200);
 150   4            cmd(0x06);
 151   4            
 152   4            i++;
 153   4          }
 154   3          else if(P1==0xDB)
 155   3          {
 156   4            *(ptr+i)='2';
 157   4            dat('2');
 158   4            delay(200);
 159   4            cmd(0x06);
 160   4            
 161   4            i++;
 162   4          }
 163   3          else if(P1==0xBB)
 164   3          {
 165   4            *(ptr+i)='3';
 166   4            dat('3');
 167   4            delay(200);
 168   4            cmd(0x06);
 169   4            
 170   4            i++;
 171   4          }
 172   3          else if(P1==0x7B)
 173   3          {
 174   4            *(ptr+i)='-';
 175   4            dat('-');
 176   4            delay(200);
 177   4            cmd(0x06);
 178   4            
C51 COMPILER V9.60.0.0   LOCK                                                              04/11/2022 21:24:05 PAGE 4   

 179   4            i++;
 180   4          }
 181   3        
 182   3        
 183   3        
 184   3          P1=0xF7;
 185   3          if(P1==0xE7)
 186   3          {
 187   4            *(ptr+i)='C';
 188   4            dat('C');
 189   4            delay(200);
 190   4            cmd(0x06);
 191   4            
 192   4            i++;
 193   4            
 194   4          }
 195   3          else if(P1==0xD7)
 196   3          {
 197   4            *(ptr+i)='0';
 198   4            dat('0');
 199   4            delay(200);
 200   4            cmd(0x06);
 201   4            
 202   4            i++;
 203   4          }
 204   3          else if(P1==0xB7)
 205   3          {
 206   4            *(ptr+i)='=';
 207   4            dat('=');
 208   4            delay(200);
 209   4            cmd(0x06);
 210   4            
 211   4            i++;
 212   4          }
 213   3          else if(P1==0x77)
 214   3          {
 215   4            *(ptr+i)='+';
 216   4            dat('+');
 217   4            delay(200);
 218   4            cmd(0x06);
 219   4            
 220   4            i++;
 221   4          }
 222   3        }
 223   2        while(i==4)
 224   2        {
 225   3          
 226   3        
 227   3            delay(100);
 228   3        cmd(0x01);
 229   3        IN1 = 0;
 230   3        IN2 = 0;
 231   3        return 0;
 232   3          
 233   3        }
 234   2        
 235   2        
 236   2      }
 237   1          }
 238          void main()
 239          {
 240   1        
C51 COMPILER V9.60.0.0   LOCK                                                              04/11/2022 21:24:05 PAGE 5   

 241   1        char pass2[5];
 242   1        int i=0;
 243   1        char *ptr;
 244   1        ptr = pass2;
 245   1        lcdint();
 246   1        display("Password-");
 247   1        pass2[4]='\0';
 248   1          
 249   1          while(1)
 250   1          {
 251   2          while(i<4)
 252   2        {
 253   3          P1=0xFE;
 254   3          if(P1==0xEE)
 255   3          {
 256   4            *(ptr+i)='7';
 257   4            dat('7');
 258   4            delay(200);
 259   4            cmd(0x06);
 260   4            
 261   4            i++;
 262   4            
 263   4          }
 264   3          else if(P1==0xDE)
 265   3          {
 266   4            *(ptr+i)='8';
 267   4            dat('8');
 268   4            delay(200);
 269   4            cmd(0x06);
 270   4            
 271   4            i++;
 272   4            
 273   4          }
 274   3          else if(P1==0xBE)
 275   3          {
 276   4            *(ptr+i)='9';
 277   4            dat('9');
 278   4            delay(200);
 279   4            cmd(0x06);
 280   4            
 281   4            i++;
 282   4          }
 283   3          else if(P1==0x7E)
 284   3          {
 285   4            *(ptr+i)='/';
 286   4            dat('/');
 287   4            delay(200);
 288   4            cmd(0x06);
 289   4            
 290   4            i++;
 291   4          }
 292   3          
 293   3        
 294   3          P1=0xFD;
 295   3          if(P1==0xED)
 296   3          {
 297   4            *(ptr+i)='4';
 298   4            dat('4');
 299   4            delay(200);
 300   4            cmd(0x06);
 301   4            
 302   4            i++;
C51 COMPILER V9.60.0.0   LOCK                                                              04/11/2022 21:24:05 PAGE 6   

 303   4          }
 304   3          else if(P1==0xDD)
 305   3          {
 306   4            *(ptr+i)='5';
 307   4            dat('5');
 308   4            delay(200);
 309   4            cmd(0x06);
 310   4            
 311   4            i++;
 312   4          }
 313   3          else if(P1==0xBD)
 314   3          {
 315   4            *(ptr+i)='6';
 316   4            dat('6');
 317   4            delay(200);
 318   4            cmd(0x06);
 319   4            
 320   4            i++;
 321   4          }
 322   3          else if (P1==0x7D)
 323   3          {
 324   4            *(ptr+i)='*';
 325   4            dat('*');
 326   4            delay(200);
 327   4            cmd(0x06);
 328   4            
 329   4            i++;
 330   4          }
 331   3        
 332   3        
 333   3          P1=0xFB;
 334   3          if(P1==0xEB)
 335   3          {
 336   4            *(ptr+i)='1';
 337   4            dat('1');
 338   4            delay(200);
 339   4            cmd(0x06);
 340   4            
 341   4            i++;
 342   4          }
 343   3          else if(P1==0xDB)
 344   3          {
 345   4            *(ptr+i)='2';
 346   4            dat('2');
 347   4            delay(200);
 348   4            cmd(0x06);
 349   4            
 350   4            i++;
 351   4          }
 352   3          else if(P1==0xBB)
 353   3          {
 354   4            *(ptr+i)='3';
 355   4            dat('3');
 356   4            delay(200);
 357   4            cmd(0x06);
 358   4            
 359   4            i++;
 360   4          }
 361   3          else if(P1==0x7B)
 362   3          {
 363   4            *(ptr+i)='-';
 364   4            dat('-');
C51 COMPILER V9.60.0.0   LOCK                                                              04/11/2022 21:24:05 PAGE 7   

 365   4            delay(200);
 366   4            cmd(0x06);
 367   4            
 368   4            i++;
 369   4          }
 370   3        
 371   3        
 372   3        
 373   3          P1=0xF7;
 374   3          if(P1==0xE7)
 375   3          {
 376   4            *(ptr+i)='C';
 377   4            dat('C');
 378   4            delay(200);
 379   4            cmd(0x06);
 380   4            
 381   4            i++;
 382   4            
 383   4          }
 384   3          else if(P1==0xD7)
 385   3          {
 386   4            *(ptr+i)='0';
 387   4            dat('0');
 388   4            delay(200);
 389   4            cmd(0x06);
 390   4            
 391   4            i++;
 392   4          }
 393   3          else if(P1==0xB7)
 394   3          {
 395   4            *(ptr+i)='=';
 396   4            dat('=');
 397   4            delay(200);
 398   4            cmd(0x06);
 399   4            
 400   4            i++;
 401   4          }
 402   3          else if(P1==0x77)
 403   3          {
 404   4            *(ptr+i)='+';
 405   4            dat('+');
 406   4            delay(200);
 407   4            cmd(0x06);
 408   4            
 409   4            i++;
 410   4          }
 411   3        }
 412   2      
 413   2      while(i==4)
 414   2      {
 415   3      
 416   3      if ((strcmp(pass, pass2)) == 0)
 417   3      {
 418   4      
 419   4        delay(100);
 420   4        cmd(0x01);
 421   4        display("Correct \n");
 422   4        delay(300);
 423   4        cmd(0x80);
 424   4        display("Press 1 to reset password");
 425   4          
 426   4          cmd(0xC0);
C51 COMPILER V9.60.0.0   LOCK                                                              04/11/2022 21:24:05 PAGE 8   

 427   4          IN1 = 1;
 428   4        IN2 = 0;
 429   4      
 430   4        P1=0xFB;
 431   4          if(P1==0xEB)
 432   4          { delay(200);
 433   5              cmd(0x01);
 434   5            display("N-Password--");
 435   5            delay(200);
 436   5              i=0;
 437   5        cmd(0x13);
 438   5            changepassword(0);
 439   5            display("Password-");
 440   5          
 441   5          }
 442   4      
 443   4            
 444   4      
 445   4          
 446   4      }
 447   3      
 448   3      else
 449   3      {
 450   4        cmd(0xC0);
 451   4        display("Incorrect");
 452   4        delay(100);
 453   4        cmd(0x01);
 454   4        display("Password-");
 455   4        i = 0;
 456   4        IN1 = 0;
 457   4        IN2 = 0;
 458   4        
 459   4        delay(100);
 460   4      }
 461   3      }
 462   2      }
 463   1        }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1712    ----
   CONSTANT SIZE    =     81    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7      18
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
